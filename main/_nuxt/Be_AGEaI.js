var l=Object.defineProperty;var d=(a,s,t)=>s in a?l(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var r=(a,s,t)=>d(a,typeof s!="symbol"?s+"":s,t);import{b as u,c}from"./2vSQ8DIs.js";const n=document.createElement("template");n.innerHTML=`<style>
  :host {
    display: block;
  }
  iframe.d-frame-iframe {
    display: block;
    width: 100%;
    border: none;
    max-height: 100%;
  }
</style><slot name="loader"></slot><iframe class="d-frame-iframe" frameborder="0">`;class g extends HTMLElement{constructor(){super();r(this,"initialSrc");r(this,"iframeElement");r(this,"slotElement");r(this,"width");r(this,"aspectRatioHeight");r(this,"resizedHeight");const t=n.content.cloneNode(!0);this.slotElement=t.childNodes[1],this.resize!=="yes"&&(this.slotElement.style.display="none"),this.iframeElement=t.childNodes[2],this.iframeElement.setAttribute("scrolling",this.resize==="yes"?"no":"auto"),this.iframeElement.setAttribute("loading",this.lazy?"lazy":"eager"),this.attachShadow({mode:"open"}).appendChild(t),new ResizeObserver(h=>{this.width!==h[0].contentRect.width&&(this.width=h[0].contentRect.width,this.updateAspectRatioHeight())}).observe(this),window.addEventListener("message",h=>this.onMessage(h))}static get observedAttributes(){return["src","aspect-ratio","height"]}get debug(){return this.hasAttribute("debug")}set debug(t){t?this.setAttribute("debug",""):this.removeAttribute("debug")}get lazy(){return this.hasAttribute("lazy")}set lazy(t){t?this.setAttribute("lazy",""):this.removeAttribute("lazy")}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t)}get aspectRatio(){return this.getAttribute("aspect-ratio")??"auto"}set aspectRatio(t){this.setAttribute("aspect-ratio",t)}get height(){return this.getAttribute("height")}set height(t){t?this.setAttribute("height",t):this.removeAttribute("height")}set resize(t){this.setAttribute("resize",t)}get resize(){const t=this.getAttribute("resize");return t===null?"auto":t===""?"yes":t}get actualAspectRatio(){return this.aspectRatio!=="auto"?Number(this.aspectRatio):!this.width||this.width<500?1:this.width<800?4/3:this.width<1200?16/9:21/9}onMessage(t){var e;if(t.source===((e=this.iframeElement)==null?void 0:e.contentWindow)&&typeof t.data=="object"&&t.data.dFrame==="child"){const i=t.data;this.log("debug","received message from child",i),u(i)&&(this.postMessageToIframe("init",{debug:this.debug}),this.init()),c(i)&&(this.resizedHeight=i.data,this.updateStyle())}}init(){this.initialSrc=this.src}postMessageToIframe(t,e){var h,o;const i={dFrame:"parent",type:t,data:e};this.log("debug","send message to child",i),(o=(h=this.iframeElement)==null?void 0:h.contentWindow)==null||o.postMessage(i)}updateSrc(){this.initialSrc?this.postMessageToIframe("updateSrc",this.src):this.iframeElement.setAttribute("src",this.src)}updateStyle(){let t="";(this.resize==="yes"||this.resize==="auto"&&this.resizedHeight)&&(this.iframeElement.setAttribute("scrolling","no"),this.resizedHeight?(this.slotElement.style.display="none",t+=`height:${this.resizedHeight}px;`):this.height?(this.slotElement.style.display="none",t+=`height:${this.height};`):this.aspectRatio!=="auto"?(this.slotElement.style.display="none",t+=`height:${this.aspectRatioHeight}px;`):(this.slotElement.style.display="block",t+="height:0;")),(this.resize==="no"||this.resize==="auto"&&!this.resizedHeight)&&(this.iframeElement.setAttribute("scrolling","auto"),this.height?t+=`height:${this.height};`:t+=`height:${this.aspectRatioHeight}px;`),this.iframeElement.setAttribute("style",t)}updateAspectRatioHeight(){this.width&&(this.resizedHeight||this.height||(this.aspectRatioHeight=this.width/this.actualAspectRatio,this.updateStyle()))}log(t,...e){t==="debug"&&!this.debug||(t==="debug"&&console.debug("d-frame",...e),t==="info"&&console.info("d-frame",...e))}connectedCallback(){if(!this.hasAttribute("src"))throw new Error("src is a required attribute");this.log("debug","connected"),this.updateSrc(),this.updateStyle()}attributeChangedCallback(t,e,i){this.log("debug","attribute change",t,e,i),t==="aspect-ratio"&&this.updateAspectRatioHeight(),t==="src"&&this.updateSrc(),t==="height"&&this.updateStyle()}}customElements.define("d-frame",g);
